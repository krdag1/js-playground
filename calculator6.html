<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>calculator</title>
</head>
<body>
    <h1>문자열 계산기 구현하기(refactoring to object)</h1>
    <div id="output">출력위치</div>
    <script>

        var input ={ i:2 };
        input.getFirstValue = function() {
            var n1 = Number(prompt("첫 번째 수를 입력하세요"));
            return n1;
        };

        input.getSecondValue = function() {
            var n2 = Number(prompt( this.i + "번째 수를 입력하세요 "));
            this.i++;
            return n2;
        };

        input.getOperator = function() {
            while( true ) {
                var op = prompt("연산자를 입력하세요, 멈추려면 'q'를 입력하세요");
                if (op === '+' || op === '-' || op === '*' || op === '/' || op === 'q') {
                    return op;
                } else {
                    alert("입력오류: 연산자( +, - , *, /) 중 한 개를 입력하세요");
                }
            }

        };

        var calculator = {};
        calculator.calculate = function (first, second, operator) {
            switch ( operator ) {
                case "+" :
                    return first + second;
                    break;
                case "-":
                    return first - second;
                    break;
                case "*":
                    return first * second;
                    break;
                case "/":
                    return first / second;
                    break;
            }

        };
        var output = {};
        output.out = document.getElementById("output");
        output.print = function(result) {
            this.out.innerHTML =  "결과: " + result;
        };
        

        function main() {
            console.log("main function is working");
            
            var result = input.getFirstValue();
            while( true ) {

                var op = input.getOperator();
                if ( op === 'q' ) {
                    break;
                }
                var num = input.getSecondValue();
                result = calculator.calculate(result, num, op);
            }
            output.print(result);
            
        }

        main();
    </script>
</body>
</html>